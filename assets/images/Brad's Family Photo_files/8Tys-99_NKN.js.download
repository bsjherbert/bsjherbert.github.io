if (self.CavalryLogger) { CavalryLogger.start_js(["hQmPi"]); }

__d("useCometPrerendererImpl",["React","clearTimeout","emptyFunction","setTimeout"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("React").useCallback,h=b("React").useEffect,i=b("React").useRef,j=b("React").useState,k=50;function l(a){a&&(typeof a==="function"?a():a.preload())}function m(a){return a.pointerType==="mouse"}a=function(a,c,d,e,f){__p&&__p();var n=j(!1),o=n[0],p=n[1],q=i(null);n=g(function(c){(a==="tooltip"||a==="button"&&d!=null)&&(q.current=b("setTimeout")(function(){a==="tooltip"?(p(!0),l(d),l(e)):a==="button"&&l(d)},k))},[a,d,e]);var r=g(function(){b("clearTimeout")(q.current),q.current=null,p(!1),f&&f()},[f]),s=g(function(b){if(!m(b))return;a==="button"&&(p(!0),l(e))},[a,e]);h(function(){return function(){b("clearTimeout")(q.current)}},[]);if(a==null)return[{isVisible:c,shouldPrerender:!1},b("emptyFunction"),b("emptyFunction"),b("emptyFunction")];c={isVisible:c,shouldPrerender:o};return[c,n,r,s]};e.exports=a}),null);
__d("CometResourceDownloadLogger",["performance"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){var b=a.indexOf("?");return b===-1?a:a.substring(0,b)}function h(a,b){b=b.substring(b.lastIndexOf(".")+1);if(b==="js"||b==="css")return b;else if(a==="img"||b==="gif"||b==="png"||b==="jpg"||b==="ico")return"img";else return a}function i(){return{css:{cacheCount:0,encodedBodySize:0,totalCount:0,transferSize:0},img:{cacheCount:0,encodedBodySize:0,totalCount:0,transferSize:0},js:{cacheCount:0,encodedBodySize:0,totalCount:0,transferSize:0}}}a=function(a,c){__p&&__p();if(typeof b("performance").getEntriesByType!=="function")return new Map();var d=i(),e=b("performance").getEntriesByType("resource").filter(function(b){return b.startTime>=a&&b.startTime<=c}).map(function(a){return{encodedBodySize:a.encodedBodySize,transferSize:a.transferSize,type:h(a.initiatorType,g(a.name))}}).filter(function(a){return d[a.type]});e.forEach(function(a){var b=d[a.type];b.encodedBodySize+=a.encodedBodySize;b.transferSize+=a.transferSize;b.totalCount++;a.transferSize===0&&b.cacheCount++});e=new Map();for(var f in d){var j=d[f];for(var k in j)e.set(f+"_"+k,j[k])}return e};e.exports=a}),null);
__d("CometVisualCompletionUtil",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={getBoundingClientRect:function(a,b){if(typeof a.getBoundingClientRect!=="function")return{bottom:0,left:0,right:0,top:0};a=a.getBoundingClientRect();var c=a.top,d=a.left,e=a.bottom;a=a.right;return{bottom:b!=null?b+(e-c):e,left:d,right:a,top:b!=null?b:c}},getPixels:function(a){return(a.right-a.left)*(a.bottom-a.top)},getRectIntersection:function(a,b){return{bottom:Math.max(Math.min(a.bottom,b.bottom),b.top),left:Math.min(Math.max(a.left,b.left),b.right),right:Math.max(Math.min(a.right,b.right),b.left),top:Math.min(Math.max(a.top,b.top),b.bottom)}},getRectangle:function(a,b){a=g.getBoundingClientRect(a);var c=a.top,d=a.left,e=a.bottom;a=a.right;e={bottom:e,left:d,right:a,top:c};return g.getRectIntersection(e,b)},getViewportSize:function(){return{height:window.innerHeight,width:window.innerWidth}},inAboveTheFold:function(a){a=a;var b=g.getViewportSize();a=g.getPixels(g.getRectangle(a,{bottom:b.height,left:0,right:b.width,top:-window.scrollY}));return a>0},offsetTop:function(a,b){__p&&__p();var c=0;a=a;while(a&&a.offsetParent&&typeof a.offsetTop==="number")c+=a.offsetTop,a=a.offsetParent;if(a&&a.offsetParent==null&&typeof a.getBoundingClientRect==="function"){var d=a.getBoundingClientRect();d=d.top;d>=0?c+=d:a===document.body&&(c-=b)}return c},trimHash:function(a){return a.split("#")[0]}};e.exports=g}),null);
__d("CometVisualCompletionTrace",["CometResourceDownloadLogger","CometVisualCompletionUtil","VisibilityListener","gkx","performance","performanceAbsoluteNow","performanceNavigationStart"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=/url\(.*(http.*)\)/gi;a=function(){__p&&__p();function a(a,c,d,e){__p&&__p();var f=this;this.$9=0;this.$10=0;this.$11=0;this.$12=0;this.initialScrollY=window.scrollY;this.scrolledVC=0;this.report=null;this.measureOriginalViewport=!0;this.scrollEventHandler=function(){f.addMarkerPoint("scroll_start",b("performanceAbsoluteNow")()),window.removeEventListener("scroll",f.scrollEventHandler)};this.$6=new Map();this.$3=new Map();this.$4=new Map();this.$1=[];this.$2=[];this.$8=0;this.$13=[];this.$14=new Set();this.$5=a;this.$7=b("CometVisualCompletionUtil").getViewportSize();this.$15=window.scrollY;this.navSequence=c;this.traceID=d;this.markerPoints=new Map();this.annotations=new Map();this.tagSet=new Map();this.navDone=!1;this.interactionType=e;window.addEventListener("scroll",this.scrollEventHandler,{passive:!0})}var c=a.prototype;c.addAnnotation=function(a,b){this.annotations.set(a,b)};c.addMarkerPoint=function(a,b,c){c===void 0&&(c={}),this.markerPoints.set(a,{data:c,timestamp:b-this.$5})};c.addVisualElement=function(a,b,c){this.$13.push([a,c,b,window.scrollY])};c.trackPagelet=function(a,b){this.$4.set(a,b)};c.addTag=function(a,b){this.tagSet.has(a)||this.tagSet.set(a,new Set());a=this.tagSet.get(a);a&&a.add(b)};c.calculate=function(a){__p&&__p();var c=this;a===void 0&&(a=!0);window.removeEventListener("scroll",this.scrollEventHandler);this.$7=b("CometVisualCompletionUtil").getViewportSize();var d=b("performanceAbsoluteNow")();this.$8=0;this.$10=0;this.$11=0;this.setResourceTimingMap();this.initTree();this.getImages();a&&b("gkx")("679542")&&this.getBackgroundImages();this.$9=this.calculatePaintedPixels(this.$1,this.$7.width*this.$7.height);var e={annotations:this.annotations,bgCheckLatency:this.$11,bgChecked:this.$8,bgNum:0,bgPixels:0,calcLatency:0,compNum:0,compPixels:0,elements:this.$2,finalScrollY:this.$15,imgNum:0,imgPixels:0,initialScrollY:this.initialScrollY,markerPoints:this.markerPoints,navComplete:this.$12,navSequence:this.navSequence,paintedPixels:this.$10,scrollY:window.scrollY,scrolledVC:this.scrolledVC,speedIndex:0,startTime:this.$5,tagSet:this.tagSet,totalPixels:this.$9,traceId:this.traceID,tracePolicy:this.tracePolicy,vcWithoutImage:0,viewport:this.$7,visuallyComplete:0};this.$2.length&&(this.$2=this.$2.sort(function(a,b){return b.latency-a.latency}),e.visuallyComplete=this.$2[0].latency,e.scrollY=this.$2[0].scrollY,this.addMarkerPoint("FP",this.$2[this.$2.length-1].timestamp),this.$4.forEach(function(a,b){var d;c.$3.has(b)?d=c.$3.get(b):d=c.findParent(b);d&&c.markerPoints.set("pageletVC_"+a,{timestamp:d.latency})}),this.$2.forEach(function(a){__p&&__p();e.vcWithoutImage===0&&a.type==="component"&&(e.vcWithoutImage=a.latency);e.speedIndex+=a.pixels/c.$10*a.latency;switch(a.type){case"component":e.compNum++;e.compPixels+=a.pixels;break;case"img":e.imgNum++;e.imgPixels+=a.pixels;break;case"bg":e.bgNum++;e.bgPixels+=a.pixels;break}if(c.$4.size>0){var b=a.element.parentElement;while(b){if(c.$4.has(b)){var d=c.$4.get(b);if(d!=null){c.markerPoints.set("pageletVC_"+d,{timestamp:a.latency});c.$4["delete"](b);break}}b=b.parentElement}}}));e.calcLatency=b("performanceAbsoluteNow")()-d;this.setupMetaData(e);this.report=e;return e};c.findParent=function(a){a=a.parentElement;while(a){if(this.$3.has(a))return this.$3.get(a);a=a.parentElement}return null};c.checkExcluded=function(a){a=a;while(a){if(this.$14.has(a))return!0;a=a.parentElement}return!1};c.getBackgroundImages=function(){__p&&__p();var c=this,d=b("performanceAbsoluteNow")();this.$1.forEach(function(d){__p&&__p();if(typeof d.element.querySelectorAll==="function"){d=d.element.querySelectorAll(":not(img)");Array.prototype.forEach.call(d,function(d){__p&&__p();var e=c.findParent(d);if(!e||c.checkExcluded(d))return;var f=b("CometVisualCompletionUtil").offsetTop(d,c.initialScrollY),g=b("CometVisualCompletionUtil").getBoundingClientRect(d,c.measureOriginalViewport?f:void 0);g=b("CometVisualCompletionUtil").getRectIntersection(g,e.rectangle);var h=b("CometVisualCompletionUtil").getPixels(g);if(!h)return;if(c.measureOriginalViewport&&f>c.$7.height)return;var i=c.getStyleBackground(d);if(i==null)return;i=b("CometVisualCompletionUtil").trimHash(i);if(c.$6.has(i)){var j=c.$6.get(i)+b("performanceNavigationStart")();if(j>=c.$5){d={children:[],element:d,latency:Math.max(e.latency,j-c.$5),mutationType:"bg",offsetTop:f,parent:e,pixels:h,rectangle:g,scrollY:e.scrollY,timestamp:j,type:"bg",url:i,veid:String(a.$16++)};e.children.push(d)}}})}});this.$11=b("performanceAbsoluteNow")()-d};c.getImages=function(){__p&&__p();var c=this;this.$1.forEach(function(d){__p&&__p();if(typeof d.element.querySelectorAll==="function"){d=d.element.querySelectorAll("img");Array.prototype.forEach.call(d,function(d){__p&&__p();if(typeof d.currentSrc!=="string"||d.currentSrc==="")return;var e=c.findParent(d);if(!e||c.checkExcluded(d))return;var f=b("CometVisualCompletionUtil").offsetTop(d,c.initialScrollY),g=b("CometVisualCompletionUtil").getBoundingClientRect(d,c.measureOriginalViewport?f:void 0);g=b("CometVisualCompletionUtil").getRectIntersection(g,e.rectangle);if(d.parentElement){var h=b("CometVisualCompletionUtil").getBoundingClientRect(d.parentElement,c.measureOriginalViewport?b("CometVisualCompletionUtil").offsetTop(d.parentElement,c.initialScrollY):void 0);g=b("CometVisualCompletionUtil").getRectIntersection(g,b("CometVisualCompletionUtil").getRectIntersection(h,e.rectangle))}h=b("CometVisualCompletionUtil").getPixels(g);if(!h)return;if(c.measureOriginalViewport&&f>c.$7.height)return;var i=d.currentSrc;i=b("CometVisualCompletionUtil").trimHash(i);if(c.$6.has(i)){var j=c.$6.get(i)+b("performanceNavigationStart")();if(j>=c.$5){d={children:[],element:d,latency:Math.max(e.latency,j-c.$5),mutationType:"img",offsetTop:f,parent:e,pixels:h,rectangle:g,scrollY:e.scrollY,timestamp:j,type:"img",url:i,veid:String(a.$16++)};e.children.push(d)}}})}})};c.getStyleBackground=function(a){__p&&__p();if(typeof window.getComputedStyle!=="function")return null;this.$8++;a=window.getComputedStyle(a);var b=a["background-image"];if(a.visibility!=="hidden"&&b&&b!=="none"){g.lastIndex=0;a=g.exec(b);if(a&&a.length>1)return a[1].replace('"',"")}return null};c.excludeElement=function(a){this.$14.add(a)};c.initTree=function(){__p&&__p();var c=this,d={bottom:this.$7.height,left:0,right:this.$7.width,top:-this.initialScrollY};this.$13.forEach(function(e){__p&&__p();var f=e[0],g=e[1],h=e[2];e=e[3];if(c.checkExcluded(f))return;var i=b("CometVisualCompletionUtil").offsetTop(f,c.initialScrollY),j=b("CometVisualCompletionUtil").getBoundingClientRect(f,c.measureOriginalViewport?i:void 0);j=b("CometVisualCompletionUtil").getRectIntersection(j,d);if(b("CometVisualCompletionUtil").inAboveTheFold(f)){g-c.$5>c.scrolledVC&&(c.scrolledVC=g-c.$5,c.$15=e);if(c.measureOriginalViewport&&i>c.$7.height)return;h={children:[],element:f,latency:g-c.$5,mutationType:h,offsetTop:i,parent:null,pixels:b("CometVisualCompletionUtil").getPixels(j),rectangle:j,scrollY:e,timestamp:g,type:"component",veid:String(a.$16++)};c.$3.set(f,h)}});this.$3.forEach(function(a){var d=c.findParent(a.element);d?(a.rectangle=b("CometVisualCompletionUtil").getRectIntersection(a.rectangle,d.rectangle),a.pixels=b("CometVisualCompletionUtil").getPixels(a.rectangle),d.children.push(a),a.parent=d):c.$1.push(a)})};c.setResourceTimingMap=function(){var a=this;if(typeof b("performance").getEntriesByType==="function"){var c=b("performance").getEntriesByType("resource");c.forEach(function(c){var d=b("CometVisualCompletionUtil").trimHash(c.name);a.$6.set(d,c.responseEnd)})}};c.calculatePaintedPixels=function(a,b){var c=this,d=b,e=0;a.sort(function(a,b){return b.timestamp-a.timestamp}).forEach(function(a){a.pixels=Math.min(d,a.pixels),e+=a.pixels,d-=a.pixels,a.pixels-=c.calculatePaintedPixels(a.children,a.pixels),a.timestamp>c.$5&&(c.$10+=a.pixels,c.$2.push(a),c.$3.set(a.element,a))});return e};c.inOriginalViewport=function(a){return b("CometVisualCompletionUtil").inAboveTheFold(a)&&b("CometVisualCompletionUtil").offsetTop(a,this.initialScrollY)<=this.$7.height};c.setInitialScrollY=function(a){this.initialScrollY=a};c.setNavCompleteTime=function(a){this.$12=a,this.navDone=!0};c.setTracePolicy=function(a){this.tracePolicy=a};c.setupMetaData=function(a){__p&&__p();var c=b("VisibilityListener").getHiddenTimings(a.startTime,a.startTime+a.visuallyComplete);if(c!=null&&c.length>0){c=c.filter(function(b){return b.key>=a.startTime&&b.key<=a.startTime+a.visuallyComplete});for(var d=0;d<c.length;d++)if(c[d].value){a.markerPoints.set("backgrounded",{timestamp:c[d].key-this.$5});break}}c=b("VisibilityListener").getHiddenTime(a.startTime,a.startTime+a.visuallyComplete);a.annotations.set("hidden",c!=null&&c>0?1:0);a.tracePolicy!=null&&a.tracePolicy!==""&&a.annotations.set("tracePolicy",a.tracePolicy);a.annotations.set("interactionId",a.traceId);a.annotations.set("height",a.viewport.height);a.annotations.set("width",a.viewport.width);a.annotations.set("scrollY",a.scrollY);a.annotations.set("finalScrollY",a.finalScrollY);a.annotations.set("initialScrollY",a.initialScrollY);a.annotations.set("overhead",a.calcLatency);a.annotations.set("navSequence",a.navSequence);a.speedIndex>0&&a.markerPoints.set("speedIndex",{timestamp:a.speedIndex});a.navSequence===1&&b("performance")&&b("performance").timing&&(b("performance").timing.responseStart&&a.markerPoints.set("TTFB",{timestamp:b("performance").timing.responseStart-a.startTime}));a.elements.length&&(a.vcWithoutImage>0&&a.markerPoints.set("vcWithoutImage",{timestamp:a.vcWithoutImage}),this.measureOriginalViewport&&a.scrolledVC>0&&a.markerPoints.set("scrolledVC",{timestamp:a.scrolledVC}));d=b("CometResourceDownloadLogger")(a.startTime-b("performanceNavigationStart")(),a.startTime+a.visuallyComplete-b("performanceNavigationStart")());d.forEach(function(b,c){a.annotations.set(c,b)})};return a}();a.$16=1;e.exports=a}),null);
__d("CometVisualCompletionTraceForInteraction",["requireCond","CometInteractionTracingMetrics","cr:683059","CometVisualCompletionTrace","CometVisualCompletionUtil","IntersectionObserver","JSScheduler","MutationObserver","intersectionObserverEntryIsIntersecting","performance","performanceAbsoluteNow","requestAnimationFrame"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={attributes:!0,characterData:!0,childList:!0,subtree:!0};function h(a){return typeof a.getAttribute!=="function"?!0:!a.getAttribute("data-novc")}a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c,d,e,f){__p&&__p();var g;g=a.call(this,c,d,e,f)||this;g.$CometVisualCompletionTraceForInteraction1=new Set();g.$CometVisualCompletionTraceForInteraction2=new Set();g.$CometVisualCompletionTraceForInteraction3=new Map();g.$CometVisualCompletionTraceForInteraction4=0;g.$CometVisualCompletionTraceForInteraction5=[];g.$CometVisualCompletionTraceForInteraction6=[];g.mutationCallback=function(a){var c="m_"+g.$CometVisualCompletionTraceForInteraction4++;g.holdTrigger(c);b("requestAnimationFrame")(function(){g.mutationRecordHandler(a),g.resumeTrigger(c)})};g.waitImage=function(a){__p&&__p();if(a.src==null||a.src===""||a.src.indexOf("http")!==0)return;var c=a.src,d;c.indexOf("#")>=0&&(d=b("CometVisualCompletionUtil").trimHash(c));if(!g.checkResourceTimingDone(c)&&(d==null||!g.checkResourceTimingDone(d))){var e=new Image();e.onload=e.onerror=function(){b("JSScheduler").scheduleNormalPriCallback(function(){g.imageDone(c),e=null})};g.imageWait(c);e.src=a.src}};g.mutationObserver=new(b("MutationObserver"))(g.mutationCallback);g.measureOriginalViewport=!1;return g}var d=c.prototype;d.checkResourceTimingDone=function(a){a=b("performance").getEntriesByName(a);return a.length>0&&a[0].responseEnd};d.holdTrigger=function(a){var b=this;this.$CometVisualCompletionTraceForInteraction1.add(a);return function(){b.resumeTrigger(a)}};d.loadingStateShown=function(a,b,c){var d=b;b||(this.holdTrigger(a),this.markerPoints.has("loadingState_start")||this.addMarkerPoint("loadingState_start",c),d=!0);return d};d.loadingStateRemoved=function(a,b,c){var d=b;b&&(this.addMarkerPoint("loadingState_end",c),d=!1,this.resumeTrigger(a));return d};d.imageDone=function(a){var c=this;if(!this.$CometVisualCompletionTraceForInteraction2.has(a))return;this.$CometVisualCompletionTraceForInteraction2["delete"](a);b("JSScheduler").scheduleLoggingPriCallback(function(){c.runInstrumentation()})};d.imageWait=function(a){this.$CometVisualCompletionTraceForInteraction2.add(a)};d.mutationRecordHandler=function(a){__p&&__p();var b=[];Array.prototype.forEach.call(a,function(a){__p&&__p();if(a.type==="childList"&&a.addedNodes&&a.addedNodes.length)Array.prototype.forEach.call(a.addedNodes,function(a){h(a)&&b.push([a,"mutationAdd"])});else if(a.type==="attributes"&&h(a.target))if(a.attributeName==="hidden")b.push([a.target,"mutationHiddenAttribute"]);else if(a.attributeName==="style"){var c=a.target.getAttribute("style");c!=null&&c!==""&&c.contains("visibility")&&b.push([a.target,"mutationHiddenAttribute"])}});this.trackElements(b)};d.observeLoadingState=function(a){__p&&__p();var c=this;b("CometVisualCompletionUtil").inAboveTheFold(a)&&this.addMarkerPoint("loadingState_start",b("performanceAbsoluteNow")());var d=function(a,d){var e=b("performanceAbsoluteNow")();b("JSScheduler").scheduleNormalPriCallback(function(){Array.prototype.forEach.call(a,function(a){b("intersectionObserverEntryIsIntersecting")(a)?c.markerPoints.has("loadingState_start")||c.addMarkerPoint("loadingState_start",e):c.markerPoints.has("loadingState_start")&&c.addMarkerPoint("loadingState_end",e)})})};d=new(b("IntersectionObserver"))(d);d.observe(a);this.$CometVisualCompletionTraceForInteraction6.push(d)};d.waitLoadingState=function(a){__p&&__p();var c=this,d=this.$CometVisualCompletionTraceForInteraction3.get(a);if(d!=null)return d;var e=!1,f="l_"+this.$CometVisualCompletionTraceForInteraction4++;b("CometVisualCompletionUtil").inAboveTheFold(a)&&(e=this.loadingStateShown(f,e,b("performanceAbsoluteNow")()));d=function(a,d){var g=b("performanceAbsoluteNow")();b("JSScheduler").scheduleNormalPriCallback(function(){Array.prototype.forEach.call(a,function(a){b("intersectionObserverEntryIsIntersecting")(a)?e=c.loadingStateShown(f,e,g):e=c.loadingStateRemoved(f,e,g)})})};var g=new(b("IntersectionObserver"))(d);g.observe(a);d=function(){g.disconnect(),c.$CometVisualCompletionTraceForInteraction3["delete"](a),e=c.loadingStateRemoved(f,e,b("performanceAbsoluteNow")())};this.$CometVisualCompletionTraceForInteraction3.set(a,d);return d};d.resumeTrigger=function(a){var c=this;if(!this.$CometVisualCompletionTraceForInteraction1.has(a))return;this.$CometVisualCompletionTraceForInteraction1["delete"](a);b("JSScheduler").scheduleLoggingPriCallback(function(){c.runInstrumentation()})};d.observeMutation=function(a){this.mutationObserver.observe(a,g)};d.trackElements=function(a){__p&&__p();var c=this,d=b("performanceAbsoluteNow")();a.forEach(function(a){__p&&__p();var e=a[0];a=a[1];if(e.tagName==="IMG"){c.waitImage(e);return}c.addVisualElement(e,a,d);c.interactionType==="INTERACTION"&&b("cr:683059")&&b("cr:683059").excludeElement(e);if(typeof b("performance").getEntriesByName==="function"&&e.nodeType===Node.ELEMENT_NODE){a=e.querySelectorAll("img");Array.prototype.forEach.call(a,c.waitImage)}})};d.onComplete=function(a){this.$CometVisualCompletionTraceForInteraction5.push(a)};d.runInstrumentation=function(){__p&&__p();if(this.report!=null||this.$CometVisualCompletionTraceForInteraction1.size>0||this.$CometVisualCompletionTraceForInteraction2.size>0)return;this.mutationObserver.disconnect();this.$CometVisualCompletionTraceForInteraction3.forEach(function(a){a()});this.$CometVisualCompletionTraceForInteraction6.forEach(function(a){a.disconnect()});var a=b("CometInteractionTracingMetrics").get(this.traceID);a&&(this.copyVCReport(a),this.$CometVisualCompletionTraceForInteraction5.forEach(function(a){a()}))};d.copyVCReport=function(a,b){__p&&__p();b===void 0&&(b=!0);b=this.calculate(b);b.visuallyComplete>0&&(this.markerPoints.has("loadingState_start")&&!this.markerPoints.has("loadingState_end")&&this.addMarkerPoint("loadingState_end",b.visuallyComplete+a.start),a.markerPoints.visuallyComplete={timestamp:b.visuallyComplete+a.start,type:"VisualCompletion"});a.vcReport=b;b.annotations.forEach(function(b,c){a.metadata[c]=b});b.markerPoints.forEach(function(b,c){var d=b.data;b=b.timestamp;a.markerPoints[c]={data:d,timestamp:b+a.start,type:"VisualCompletion"}})};return c}(b("CometVisualCompletionTrace"));e.exports=a}),null);
__d("CometInteractionVC",["CometInteractionTracingMetrics","CometVisualCompletionTraceForInteraction","CometVisualCompletionUtil","performanceAbsoluteNow","performanceNavigationStart","requestAnimationFrame"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("performanceNavigationStart")();a={addRenderingInfo:function(a,c,d,e){var f=b("CometInteractionTracingMetrics").currentInteractionLogger();b("requestAnimationFrame")(function(){f.forEach(function(f){if(f.vcTracker&&f.type===e){var g=Number(b("CometVisualCompletionUtil").inAboveTheFold(a)),h=b("performanceAbsoluteNow")(),i={visible:g};d!=null&&(i.position=d);f.vcTracker&&f.vcTracker.addMarkerPoint("Render_"+c+(d!=null?"_"+d:""),h,i);g===1&&(d!=null&&(f.vcTracker&&f.vcTracker.addMarkerPoint("Render_"+c+"_LastVisible",h,i)),f.vcTracker&&f.vcTracker.addMarkerPoint("LastVisibleRender",h,babelHelpers["extends"]({},i,{name:c})))}})})},observeLoadingState:function(a,c){a=b("CometInteractionTracingMetrics").get(a);a&&a.vcTracker&&a.vcTracker.observeLoadingState(c)},observeMutation:function(a,c){a=b("CometInteractionTracingMetrics").get(a);a&&a.vcTracker&&a.vcTracker.observeMutation(c)},startVisualCompletionTrace:function(a){a=b("CometInteractionTracingMetrics").get(a);a&&(a.type==="INTERACTION"||a.type==="TAIL_LOAD")&&!a.vcTracker&&(a.vcTracker=new(b("CometVisualCompletionTraceForInteraction"))(a.start+g,0,a.traceId,a.type),a.vcTracker.holdTrigger(a.traceId))},trackLoadingState:function(a){var c=[];b("CometInteractionTracingMetrics").currentInteractionLogger().forEach(function(b){b.vcTracker&&c.push(b.vcTracker.waitLoadingState(a))});return c},trackVisualCompletion:function(a,c){var d=b("CometInteractionTracingMetrics").currentInteractionLogger();b("requestAnimationFrame")(function(){d.forEach(function(b){b.vcTracker&&b.type===c&&(b.vcTracker.trackElements([[a,"mutationRoot"]]),b.vcTracker&&b.vcTracker.observeMutation(a))})})}};e.exports=a}),null);
__d("CometPerfLogger",["QuickPerformanceLogger","VisibilityListener","performance","performanceNavigationStart"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("performanceNavigationStart")(),h=10;function i(a,c,d){d===void 0&&(d=0),b("QuickPerformanceLogger").annotateMarkerInt(a,"numReactCommit",c.size,d)}function j(a,c,d){d===void 0&&(d=0);for(var e in c.metadata){var f=c.metadata[e];typeof f==="string"?b("QuickPerformanceLogger").annotateMarkerString(a,e,f,d):typeof f==="number"&&b("QuickPerformanceLogger").annotateMarkerInt(a,e,f,d)}for(var g in c.tagSet){f=Array.from(c.tagSet[g]);b("QuickPerformanceLogger").annotateMarkerStringArray(a,g,f,d)}}function k(a,c,d){d===void 0&&(d=0);for(var e in c){var f=c[e],h=f.timestamp,i=f.data;f=f.type;if(f==="HeroTracing")continue;b("QuickPerformanceLogger").markerPoint(a,e,i&&Object.keys(i).length?JSON.stringify(i):void 0,d,h+g)}}function l(a,c,d){__p&&__p();d===void 0&&(d=0);for(var e in c)for(var f=0;f<c[e].length;f++){var i=c[e][f],j=i.start,k=i.end,l=i.data;i=i.type;if(i==="HeroTracing")continue;i=c[e].length===1?e:e+"_"+(f>=h?"MAX":f+1);b("QuickPerformanceLogger").markerPoint(a,i+"_start",void 0,d,j+g);b("QuickPerformanceLogger").markerPoint(a,i+"_end",Object.keys(l).length?JSON.stringify(l):void 0,d,k+g)}}a={copyVcQplMetrics:function(a,b){b.visuallyComplete>0&&(a.markerPoints.visuallyComplete={timestamp:b.visuallyComplete+b.startTime-g,type:"VisualCompletion"}),b.markerPoints.forEach(function(c,d){a.markerPoints[d]={data:c.data,timestamp:c.timestamp+b.startTime-g,type:d in a.markerPoints?a.markerPoints[d].type:"VisualCompletion"}}),b.annotations.forEach(function(b,c){a.metadata[c]=b}),a.hasVcMetrics=!0},initQPL:function(a,c,d){b("QuickPerformanceLogger").markerStart(a,d,c+g)},logQPL:function(a,c,d){__p&&__p();i(a,c.commitSet,d);j(a,c,d);k(a,c.markerPoints,d);l(a,c.subSpans,d);var e=b("VisibilityListener").getHiddenTime(c.start+g,c.completed+g);e=e!=null&&e>0?1:0;b("QuickPerformanceLogger").annotateMarkerInt(a,"hidden",e,d);e=c.wasCanceled?4:2;b("QuickPerformanceLogger").markerEnd(a,e,d,c.completed+g);return e},logServerTimings:function(a,c){__p&&__p();var d=typeof window.qpl_inl==="function"?window.qpl_inl():{};d=d[a+"-server"];if(d){a=(b("performance")==null?void 0:b("performance").timing)||{};var e=g;a.requestStart&&a.responseStart&&d.htmlStart&&(e=(a.requestStart+a.responseStart-d.htmlStart)/2);b("QuickPerformanceLogger").markerStart(29818883,0,e);j(29818883,c);a=0;for(var f in d)a=Math.max(a,d[f]),b("QuickPerformanceLogger").markerPoint(29818883,f,void 0,0,d[f]+e);b("QuickPerformanceLogger").markerEnd(29818883,2,0,a+e)}}};e.exports=a}),null);
__d("CometVisualChangeObserver",["CometVisualCompletion","CometVisualCompletionUtil","JSScheduler","MutationObserver","performance","performanceAbsoluteNow","requestAnimationFrame"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=new Map(),h=1,i={attributes:!0,characterData:!0,childList:!0,subtree:!0};function j(a){a=b("performance").getEntriesByName(a);return a.length>0&&a[0].responseEnd}function k(a){__p&&__p();if(a.src==null||a.src===""||a.src.indexOf("http")!==0)return;var c=a.src,d;c.indexOf("#")>=0&&(d=b("CometVisualCompletionUtil").trimHash(c));if(!j(c)&&(d==null||!j(d))){var e=new Image();e.onload=e.onerror=function(){b("JSScheduler").scheduleNormalPriCallback(function(){b("CometVisualCompletion").imageDone(c),e=null})};b("CometVisualCompletion").imageWait(c);e.src=a.src}}function l(a){__p&&__p();var c=b("performanceAbsoluteNow")();a.forEach(function(a){__p&&__p();var d=a[0];a=a[1];if(d.tagName==="IMG"){k(d);return}b("CometVisualCompletion").addVisualElement(d,a,c);if(typeof b("performance").getEntriesByName==="function"&&d.nodeType===Node.ELEMENT_NODE){a=d.querySelectorAll("img");Array.prototype.forEach.call(a,k)}})}var m=0;function n(a){if(typeof a.getAttribute!=="function")return!0;var c=a.getAttribute("data-novc");c!=null&&c!==""&&b("CometVisualCompletion").excludeElement(a);return!c}var o=function(a){__p&&__p();var c=[];Array.prototype.forEach.call(a,function(a){__p&&__p();if(a.type==="childList"&&a.addedNodes&&a.addedNodes.length)Array.prototype.forEach.call(a.addedNodes,function(a){n(a)&&c.push([a,"mutationAdd"])});else if(a.type==="attributes"&&n(a.target))if(a.attributeName==="hidden")b("CometVisualCompletion").checkLoadingStates(a.target),c.push([a.target,"mutationHiddenAttribute"]);else if(a.attributeName==="style"){var d=a.target.getAttribute("style");d!=null&&d!==""&&d.contains("visibility")&&(b("CometVisualCompletion").checkLoadingStates(a.target),c.push([a.target,"mutationHiddenAttribute"]))}});l(c)};a=function(a){var c="m_"+m++;b("CometVisualCompletion").holdTrigger(c);b("requestAnimationFrame")(function(){o(a),b("CometVisualCompletion").resumeTrigger(c)})};var p=new(b("MutationObserver"))(a);c={observe:function(a,b){b===void 0&&(b=!1);var c=h++;g.set(c,a);b||l([[a,"mutationRoot"]]);p.observe(a,i);return function(){g["delete"](c)}},start:function(){g.forEach(function(a){p.observe(a,i)})},stop:function(){p.disconnect()}};e.exports=c}),null);
__d("CometVisualCompletionQPL",["CometInteractionTracingMetrics","QuickPerformanceLogger","gkx","performanceAbsoluteNow"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=27983873;function h(a){var c=b("CometInteractionTracingMetrics").get(a.traceId);if(c){c.metadata.containsDataFromOtherInteraction&&a.annotations.set("containsDataFromOtherInteraction",1);if(c.subSpans.EventQueued!=null){c=c.subSpans.EventQueued[0];a.markerPoints.set("eventQueueEnd",{timestamp:c.end-c.start})}}}function i(a){b("QuickPerformanceLogger").markerStart(g,0,a)}function j(a,c){h(a),a.markerPoints.forEach(function(c,d){var e=c.timestamp;c=c.data;b("QuickPerformanceLogger").markerPoint(g,d,c&&Object.keys(c).length?JSON.stringify(c):void 0,0,e+a.startTime)}),a.tagSet.forEach(function(a,c){a=Array.from(a);b("QuickPerformanceLogger").annotateMarkerStringArray(g,c,a,0)}),a.annotations.forEach(function(a,c){typeof a==="string"?b("QuickPerformanceLogger").annotateMarkerString(g,c,a,0):typeof a==="number"&&b("QuickPerformanceLogger").annotateMarkerInt(g,c,a,0)}),b("QuickPerformanceLogger").annotateMarkerString(g,"rendering_strategy_selection_implementation",b("gkx")("940313")?"parallel":"serial"),b("QuickPerformanceLogger").markerEnd(g,c,0,a.visuallyComplete+a.startTime)}function k(){b("QuickPerformanceLogger").markerDrop(g,0)}a={drop:function(){k()},logIncompleteVC:function(a){if(a.tracePolicy==null||a.tracePolicy===""){k();return}a.visuallyComplete=b("performanceAbsoluteNow")()-a.startTime;j(a,4)},logVC:function(a){a.tracePolicy==null||a.tracePolicy===""||a.visuallyComplete===0?k():j(a,2)},start:function(a){i(a)}};e.exports=a}),null);
__d("CometVisualCompletion",["CometInteractionTracingMetrics","CometPerfLogger","CometVisualChangeObserver","CometVisualCompletionConstants","CometVisualCompletionQPL","CometVisualCompletionTrace","CometVisualCompletionUtil","IntersectionObserver","JSScheduler","JSTracing","intersectionObserverEntryIsIntersecting","performanceAbsoluteNow","requestAnimationFrame"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=0,h=new Set(),i=new Map(),j=new Set(),k=null,l=new Map(),m,n=[],o=[];function p(){n.forEach(function(a){a(m)}),s.logQPL()}function q(){b("JSScheduler").scheduleLoggingPriCallback(function(){if(k==null||m||h.size>0||i.size>0||j.size>0)return;b("CometVisualChangeObserver").stop();m=k.calculate();p()})}function r(a){o.forEach(function(a){a(m)}),o=[]}var s={addAnnotation:function(a,b){k!=null&&k.addAnnotation(a,b)},addMarkerPoint:function(a,c,d){c===void 0&&(c=b("performanceAbsoluteNow")()),d===void 0&&(d={}),k!=null&&c!=null&&c>0&&k.addMarkerPoint(a,c,d)},addRenderingInfo:function(a,c,d,e){__p&&__p();var f=[],g=b("JSTracing").getCurrent();g&&g.size&&g.forEach(function(a){a=b("CometInteractionTracingMetrics").get(a.name);f.push(a?a.type:"UNKNOWN")});b("requestAnimationFrame")(function(){if(k!=null&&m==null&&a!=null){var g=k.inOriginalViewport(a)?1:0,h=b("performanceAbsoluteNow")(),i={interaction:f.join(","),visible:g};d!=null&&(i.position=d);(d==null||d<10)&&s.addMarkerPoint("Render_"+c+(d!=null?"_"+d:""),h,i);g===1&&(d!=null&&s.addMarkerPoint("Render_"+c+"_LastVisible",h,i),s.addMarkerPoint("LastVisibleRender",h,babelHelpers["extends"]({},i,{name:c})),e!=null&&k.trackPagelet(a,e))}})},addTag:function(a,b){k!=null&&k.addTag(a,b)},addTracedInteraction:function(a,c,d){__p&&__p();var e=1,f=null;l.get(a)&&(e=l.get(a)+1);l.set(a,e);if(k!=null){k.addAnnotation("count_"+a,e);if(e>10)return function(){};f=k.traceID;k.addMarkerPoint(a+"_"+e+"_start",b("performanceAbsoluteNow")(),{interactionId:c,qplEvent:d})}return function(){k!=null&&k.traceID===f&&k.addMarkerPoint(a+"_"+e+"_end",b("performanceAbsoluteNow")(),{interactionId:c,qplEvent:d})}},addVisualElement:function(a,c,d){d===void 0&&(d=b("performanceAbsoluteNow")()),k!=null&&a!=null&&k.addVisualElement(a,c,d)},checkLoadingStates:function(a){a=a.querySelectorAll("["+b("CometVisualCompletionConstants").LOADING_ELEMENT_ATTR+"]");Array.prototype.forEach.call(a,function(a){s.inAboveTheFold(a)&&s.waitOnLoadingElement(a)})},dumpWaits:function(){return[h,new Set(i.keys()),j]},excludeElement:function(a){k!=null&&m==null&&k.excludeElement(a)},getReport:function(){return m},holdTrigger:function(a){h.add(a);return function(){s.resumeTrigger(a)}},imageDone:function(a){if(!j.has(a))return;j["delete"](a);q()},imageWait:function(a){j.add(a)},inAboveTheFold:function(a){return b("CometVisualCompletionUtil").inAboveTheFold(a)},loadingElementDone:function(a){var b=i.get(a);if(b==null)return;i["delete"](a);q()},logIncompleteVC:function(a,c){__p&&__p();if(k!=null&&m==null){k.addAnnotation("incompleteWaitCount",h.size);k.addAnnotation("incompleteLoadingElementsCount",i.size);k.addAnnotation("incompleteImageCount",j.size);k.addAnnotation("cancelType",c);c=k.calculate(!1);b("CometVisualCompletionQPL").logIncompleteVC(c);a!=null&&c!=null&&!a.hasVcMetrics&&(a.wasCanceled=!0,b("CometPerfLogger").copyVcQplMetrics(a,c));return c}else return null},logQPL:function(){m&&(b("CometVisualCompletionQPL").logVC(m),r(m))},onComplete:function(a){o.push(a)},resumeTrigger:function(a){if(!h.has(a))return;h["delete"](a);q()},setInitialScrollY:function(a){k!=null&&k.setInitialScrollY(a)},setRoute:function(a){k!=null&&a!=null&&k.setTracePolicy(a)},subscribe:function(a){n.push(a)},traceNavigation:function(a,c,d){__p&&__p();var e=null;if(k!=null&&m==null){e=k.traceID;var f=b("CometInteractionTracingMetrics").get(k.traceID);if(f!=null){f=s.logIncompleteVC(f,"navigation");r(f)}}b("CometVisualCompletionQPL").start(c);k=new(b("CometVisualCompletionTrace"))(c,++g,a,d);e!=null&&k.addAnnotation("incompletePreviousTrace",e);m=null;l.clear();h.clear();i.clear();j.clear();s.holdTrigger(a);f=function(b){k!=null&&a===k.traceID&&(b.completed!=null&&k.setNavCompleteTime(b.completed-b.start))};p();return f},unsubscribe:function(a){n=n.filter(function(b){return b!==a})},waitOnLoadingElement:function(a){__p&&__p();var c=i.get(a);if(c!=null)return c;c=function(c,d){b("JSScheduler").scheduleNormalPriCallback(function(){Array.prototype.forEach.call(c,function(c){b("intersectionObserverEntryIsIntersecting")(c)||(d.disconnect(),s.loadingElementDone(a))})})};var d=new(b("IntersectionObserver"))(c);d.observe(a);c=function(){d.disconnect(),s.loadingElementDone(a)};i.set(a,c);return c}};e.exports=s}),null);
__d("CometHeroInteractionIDContext",["React"],(function(a,b,c,d,e,f){"use strict";a=b("React").createContext(null);e.exports=a}),null);
__d("CometHeroInteractionImpl.react",["Promise","CometHeroInteractionContext","CometHeroInteractionIDContext","CometHeroLogging","CometInteractionTracingMetrics","FBLogger","HiddenSubtreePassiveContext","PromiseAnnotate","React","cancelAnimationFrame","relay-experimental/ProfilerContext","relay-runtime","requestAnimationFrame","useLayoutEffect_SAFE_FOR_SSR","useStable","uuid"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("React").useCallback,h=b("React").useContext,i=b("React").useEffect,j=b("React").useMemo,k=b("React").useRef,l=b("relay-runtime").RelayProfiler,m="Interaction Start",n=["root"],o=new WeakSet();function p(a,c){c=c+"_start";b("CometHeroLogging").markStart(a,c)}function q(a,c,d,e,f){d=d+"_start";b("CometHeroLogging").markEnd(a,c,[].concat(e),"PlaceholderWait","Placeholder Wait: "+(f!=null?f:"No Promises"),d)}function r(a,c,d,e,f,g){b("CometHeroLogging").markEnd(a,c,f,"Relay","Relay("+e+(g?",Network":"")+")","Relay_"+d+"_"+e,{fetchedFromNetwork:g,queryName:e})}function s(a,c,d,e){b("CometHeroLogging").markStart(c,"Relay_"+d+"_"+e)}function t(a,c,d,e,f){if(f==null)return function(){};var g=b("CometHeroLogging").getSimpleUUID();s(a,c,g,f.queryName);return function(e){e=!f.usedCache&&!f.usedPrefetcher;e&&f!=null&&b("FBLogger")("comet_infra").addToCategoryKey(f.queryName).warn("Interaction Query '%s' is not using Relay EntryPoints leading to bad performance: https://fburl.com/wiki/3tudp9id",f.queryName);r(a,c,g,f.queryName,d,e)}}function a(a,c){__p&&__p();var d=a.children,e=a.className,f=a.hidden,r=a.interactionDesc,s=a.interactionUUID,u=b("useStable")(b("uuid")),v=k(null),w=k(null),x=h(b("HiddenSubtreePassiveContext")),y=r!=null?r:"No Description",z=k({}),A=k(null),B=b("useStable")(b("CometInteractionTracingMetrics").currentInteractionLogger),C=g(function(a,c){w.current!==a&&v.current==null&&!x.getCurrent()&&Object.values(z.current).length===0&&(v.current=b("requestAnimationFrame")(function(){v.current=null,!x.getCurrent()&&w.current!==a&&Object.values(z.current).length===0&&(w.current=a,b("CometHeroLogging").markEnd(B,a,n,"Interaction","Interaction Done: "+c,m))}))},[x,B]),D=g(function(){var a=A.current;a!=null&&C(a.interactionUUID,a.interactionDesc)},[C]),E=g(function(a,c){__p&&__p();var d=A.current;d!=null&&w.current!==d.interactionUUID&&(d!==null&&Object.keys(z.current).forEach(function(a){var c=z.current[a],d=c.thenables;d=b("CometHeroLogging").createThenableDescription(d);q(B,u,a,c.pageletStack,d)}),b("CometHeroLogging").markEnd(B,d.interactionUUID,n,"Interaction","Interaction Aborted ("+c+"): "+d.interactionDesc,m),a!==null&&d.interactionUUID===a.interactionUUID&&b("CometHeroLogging").markStart(a.interactionUUID,m));w.current=null;b("cancelAnimationFrame")(v.current);v.current=null;A.current=a;a!=null&&Object.keys(z.current).forEach(function(a){p(u,a)})},[u,B]);b("useLayoutEffect_SAFE_FOR_SSR")(function(){var a=null;s!=null&&(a={interactionDesc:y,interactionUUID:s});E(a,"New Interaction");s!=null&&C(s,y)},[y,s,E,C]);b("useLayoutEffect_SAFE_FOR_SSR")(function(){if(s!=null){var a=x.getCurrent(),b=x.subscribe(function(b){a!==b&&(a=b,b?E({interactionDesc:y,interactionUUID:s},"Hidden"):C(s,y))});return function(){return b.remove()}}},[x,s,y,E,C]);i(function(){return function(){E(null,"Unmount")}},[E]);var F=j(function(){__p&&__p();var a={getRelayProfilerContext:function(a){return{wrapPrepareQueryResource:function(b){var c=t.bind(null,B,u,a);l.attachProfileHandler("fetchRelayQuery",c);try{b=b();return b}finally{l.detachProfileHandler("fetchRelayQuery",c)}}}},hold:function(c){var d=b("CometHeroLogging").getSimpleUUID();a.registerPlaceholder(d,c);var e=new(b("Promise"))(function(){});b("PromiseAnnotate").setDisplayName(e,"Hold");a.suspenseCallback(d,c,new Set([e]));return d},logCometHero:function(a,c,d){w.current!==a&&b("CometHeroLogging").markEnd(B,a,[].concat(d),"HeroRendering","Hero Rendering: "+c,m,void 0)},pageletStack:n,registerPlaceholder:function(a,c){var d=z.current[a]==null;if(!d)return;b("cancelAnimationFrame")(v.current);v.current=null;d=new Set();z.current[a]={pageletStack:c,thenables:d};p(u,a)},removePlaceholder:function(a){var c=z.current[a]!=null;if(!c)return;c=z.current[a];delete z.current[a];D();var d=c.thenables;d=b("CometHeroLogging").createThenableDescription(d);q(B,u,a,c.pageletStack,d)},suspenseCallback:function(a,c,d){__p&&__p();var e=z.current[a];e=e==null?void 0:e.thenables;z.current[a]==null&&p(u,a);z.current[a]={pageletStack:c,thenables:d};d.forEach(function(a){if(!o.has(a)){var d;o.add(a);var e=(d=b("PromiseAnnotate").getDisplayName(a))!=null?d:"Promise",f=b("CometHeroLogging").getSimpleUUID();b("CometHeroLogging").markStart(u,f);a.then(function(){b("CometHeroLogging").markEnd(B,u,c,"SuspensePromise","Promise: "+e,f)})}});e=b("CometHeroLogging").createThenableDescription(e);d=b("CometHeroLogging").createThenableDescription(d);d!==e&&(e!=null&&(q(B,u,a,c,e),p(u,a)))},unhold:function(b){a.removePlaceholder(b)}};return a},[B,u,D]);a=j(function(){return F.getRelayProfilerContext(F.pageletStack)},[F]);return b("React").createElement("div",{className:e,hidden:f,ref:c},b("React").createElement(b("CometHeroInteractionContext").Context.Provider,{value:F},b("React").createElement(b("CometHeroInteractionIDContext").Provider,{value:s},b("React").createElement(b("relay-experimental/ProfilerContext").Provider,{value:a},d))))}e.exports=b("React").forwardRef(a)}),null);
__d("XHPTemplate",["DataStore","DOM","HTML","XHPTemplateProcessor"],(function(a,b,c,d,e,f){__p&&__p();var g=b("XHPTemplateProcessor").processor;a=function(){"use strict";__p&&__p();function a(a){g instanceof Function&&(a=g(a)),this._model=a}var c=a.prototype;c.render=function(){b("HTML").isHTML(this._model)&&(this._model=b("DOM").setContent(document.createDocumentFragment(),this._model)[0]);return this._model.cloneNode(!0)};c.build=function(){return new h(this.render())};a.getNode=function(b,c){return a.getNodes(b)[c]};a.getNodes=function(a){__p&&__p();var c=b("DataStore").get(a,"XHPTemplate:nodes");if(!c){c={};var d=b("DOM").scry(a,"[data-jsid]");d.push(a);var e=d.length;while(e--){var f=d[e];c[f.getAttribute("data-jsid")]=f;f.removeAttribute("data-jsid")}b("DataStore").set(a,"XHPTemplate:nodes",c)}return c};return a}();var h=function(){"use strict";__p&&__p();function a(a){this._root=a,this._populateNodes()}var c=a.prototype;c._populateNodes=function(){this._nodes={};this._leaves={};var a=this._root.getElementsByTagName("*");for(var b=0,c=a.length;b<c;b++){var d=a[b],e=d.getAttribute("data-jsid");e&&(d.removeAttribute("data-jsid"),this._nodes[e]=d,this._leaves[e]=!d.childNodes.length)}};c.getRoot=function(){return this._root};c.getNode=function(a){return this._nodes[a]};c.setNodeProperty=function(a,b,c){this.getNode(a)[b]=c;return this};c.setNodeContent=function(a,c){if(!this._leaves[a])throw new Error("Can't setContent on non-leaf node: "+a);b("DOM").setContent(this.getNode(a),c);return this};return a}();e.exports=a}),null);
__d("VideoPlayerCea608Command",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({TEXT:"text",PAC:"pac",MIDROW:"midrow",CARRIAGE_RETURN:"carriage_return",START_ROLL_UP_2:"start_roll_up_2",START_ROLL_UP_3:"start_roll_up_3",START_ROLL_UP_4:"start_roll_up_4",END_OF_CAPTION:"end_of_caption",ERASE_DISPLAY_MEMORY:"erase_display_memory",ERASE_NON_DISPLAY_MEMORY:"erase_non_display_memory",BACKSPACE:"backspace",DELETE_TIL_END_OF_ROW:"delete_til_end_of_row",RESUME_DIRECT_CAPTIONING:"resume_direct_captioning",RESUME_CAPTION_LOADING:"resume_caption_loading",TAB_OFFSET:"tab_offset",FLASH_ON:"flash_on",__DEPRECATED__ALARM_OFF:"alarm_off",__DEPRECATED__ALARM_ON:"alarm_on",__DEPRECATED__TEXT_RESTART:"text_restart",__DEPRECATED__RESUME_TEXT_DISPLAY:"resume_text_display"});e.exports=a}),null);
__d("VideoPlayerCea608SubtitleSourceImplFacebook",["VideoPlayerCea608Command","extractCEA608","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=!1,h,i=15,j=32,k=function(){__p&&__p();function a(){this.$2=0;this.$1=new Array(j);for(var a=0;a<j;++a)this.$1[a]=" "}var b=a.prototype;b.setPos=function(a){this.$2=Math.max(0,Math.min(j-1,a))};b.movePos=function(a){a=this.$2+a;this.setPos(a)};b.backspace=function(){this.movePos(-1),this.$1[this.$2]=" "};b.putCharacter=function(a){var b=this.$2;b<j&&(this.$1[b]=a,this.movePos(1))};b.clearFromPos=function(a){for(var a=a;a<j;a++)this.$1[a]=" "};b.clear=function(){this.clearFromPos(0),this.$2=0};b.clearToEndOfRow=function(){this.clearFromPos(this.$2)};b.getCharacters=function(){return this.$1};b.getPos=function(){return this.$2};return a}(),l=function(){__p&&__p();function a(){this.$2=i-1;this.$3=null;this.$1=new Array(i);for(var a=0;a<i;++a)this.$1[a]=new k()}var b=a.prototype;b.clear=function(){this.$1.forEach(function(a,b){a.clear()})};b.setPAC=function(a){var b=a.row-1;this.$3!=null&&b<this.$3-1&&(b=this.$3-1);this.$2=b;b=this.$1[this.$2];a.indent!==null&&b.setPos(a.indent)};b.putCharacter=function(a){var b=this.$1[this.$2];b.putCharacter(a)};b.movePos=function(a){var b=this.$1[this.$2];b.movePos(a)};b.setRollupSize=function(a){this.$3=a};b.rollup=function(){if(this.$3==null)return;var a=this.$2+1-this.$3;a=this.$1.splice(a,1)[0];a.clear();this.$1.splice(this.$2,0,a)};b.backspace=function(){this.$1[this.$2].backspace()};b.clearToEndOfRow=function(){this.$1[this.$2].clearToEndOfRow()};b.getRows=function(){return this.$1.slice()};b.getCurrentRowIndex=function(){return this.$2};return a}();function m(a){return a.getRows().map(function(a){return a.getCharacters().join("")})}function n(a){var b=a.getCurrentRowIndex();return"\n"+a.getRows().map(function(a,c){var d=a.getPos();return String(c+1).padStart(3," ")+" ["+a.getCharacters().join("")+"]"+(c===b?"< ":"  ")+String(d).padStart(2," ")}).join("\n")+"\n"}var o=function(){__p&&__p();function a(){}var c=a.prototype;c.handleCommand=function(a,c,d){__p&&__p();switch(a.type){case b("VideoPlayerCea608Command").TEXT:d.putCharacter(a.data.character);return!1;case b("VideoPlayerCea608Command").TAB_OFFSET:d.movePos(a.data.tabOffset);return!1;case b("VideoPlayerCea608Command").CARRIAGE_RETURN:return!1;case b("VideoPlayerCea608Command").BACKSPACE:d.backspace();return!1;case b("VideoPlayerCea608Command").DELETE_TIL_END_OF_ROW:d.clearToEndOfRow();return!1;case b("VideoPlayerCea608Command").ERASE_DISPLAY_MEMORY:c.clear();return!0;case b("VideoPlayerCea608Command").ERASE_NON_DISPLAY_MEMORY:d.clear();return!1;case b("VideoPlayerCea608Command").PAC:d.setPAC(a.data.pacData);return!1;default:return!1}};return a}(),p=function(){__p&&__p();function a(){}var c=a.prototype;c.handleCommand=function(a,c,d){__p&&__p();switch(a.type){case b("VideoPlayerCea608Command").TEXT:c.putCharacter(a.data.character);return!0;case b("VideoPlayerCea608Command").TAB_OFFSET:c.movePos(a.data.tabOffset);return!1;case b("VideoPlayerCea608Command").CARRIAGE_RETURN:return!1;case b("VideoPlayerCea608Command").BACKSPACE:c.backspace();return!0;case b("VideoPlayerCea608Command").DELETE_TIL_END_OF_ROW:c.clearToEndOfRow();return!0;case b("VideoPlayerCea608Command").ERASE_DISPLAY_MEMORY:c.clear();return!0;case b("VideoPlayerCea608Command").PAC:c.setPAC(a.data.pacData);return!1;default:return!1}};return a}(),q=function(){__p&&__p();function a(){}var c=a.prototype;c.handleCommand=function(a,b,c){return this.$1(a,b,c)};c.$1=function(a,c,d){__p&&__p();switch(a.type){case b("VideoPlayerCea608Command").TEXT:c.putCharacter(a.data.character);return!0;case b("VideoPlayerCea608Command").TAB_OFFSET:c.movePos(a.data.tabOffset);return!1;case b("VideoPlayerCea608Command").CARRIAGE_RETURN:c.rollup();return!0;case b("VideoPlayerCea608Command").BACKSPACE:c.backspace();return!0;case b("VideoPlayerCea608Command").DELETE_TIL_END_OF_ROW:c.clearToEndOfRow();return!0;case b("VideoPlayerCea608Command").ERASE_DISPLAY_MEMORY:c.clear();return!0;case b("VideoPlayerCea608Command").ERASE_NON_DISPLAY_MEMORY:d.clear();return!1;case b("VideoPlayerCea608Command").PAC:c.setPAC(a.data.pacData);return!1;default:return!1}};return a}();a=function(){__p&&__p();function a(a){__p&&__p();var b=a.onSubtitlesLoaded;a=a.onSubtitlesChanged;this.$1=null;this.$2=null;this.$3=[];this.$4=null;this.$5=new l();this.$6=new l();this.$7=new o();this.$8=null;this.$9={changedCount:0,commandsHandledCount:0,fragmentsInsertedCount:0,fragmentsProcessedCount:0,processStartedCount:0,processedCount:0,timeUpdateHandledCount:0};this.$1=b;this.$2=a}var c=a.prototype;c.appendFragments_DEPRECATED=function(a){this.$10(a)};c.processBytes=function(a){var c=this;this.$9.processStartedCount++;return b("extractCEA608")({debugLogEnabled:g,timescale:a.timescale,videoBytes:a.videoBytes}).then(function(a){c.$9.processedCount++,c.$10(a)})};c.handleTimeUpdate=function(a){this.$11(a)};c.getStagingScreenForTestSnapshot=function(){return n(this.$6)};c.getDisplayScreenForTestSnapshot=function(){return n(this.$5)};c.destroy=function(){this.$1=null,this.$2=null,this.$3.length=0,this.$4=null,this.$5.clear(),this.$6.clear(),this.$8=null,this.$9={changedCount:0,commandsHandledCount:0,fragmentsInsertedCount:0,fragmentsProcessedCount:0,processStartedCount:0,processedCount:0,timeUpdateHandledCount:0}};c.$10=function(a){__p&&__p();var b=this;a.forEach(function(a){var c=a.presentationTime,d;for(d=b.$3.length;d>0;d--){var e=d===b.$3.length?Number.MAX_VALUE:b.$3[d].presentationTime,f=b.$3[d-1].presentationTime;if(c<e&&c>=f)break}b.$9.fragmentsInsertedCount++;b.$3.splice(d,0,a)})};c.$11=function(a){__p&&__p();this.$9.timeUpdateHandledCount++;if(!this.$3.length||this.$3[0].presentationTime>a)return;var c=0,d=!1;for(;c<this.$3.length;++c){var e=this.$3[c];if(e.presentationTime>a)break;this.$9.fragmentsProcessedCount++;if(this.$4!=null&&(e.type!==b("VideoPlayerCea608Command").TEXT||e.data.isSpecial===!0)&&JSON.stringify(e)===JSON.stringify(this.$4))continue;this.$4=e;e=this.$12(e);e&&(d=!0);this.$9.commandsHandledCount++}this.$3.splice(0,c);this.$13(m(this.$5),{textAlignment:this.$14(this.$7)})};c.$12=function(a){__p&&__p();switch(a.type){case b("VideoPlayerCea608Command").RESUME_CAPTION_LOADING:this.$7=new o();return!1;case b("VideoPlayerCea608Command").RESUME_DIRECT_CAPTIONING:this.$7=new p();this.$5=this.$6;this.$6=new l();return!0;case b("VideoPlayerCea608Command").END_OF_CAPTION:if(this.$7 instanceof o){var c=this.$6;this.$6=this.$5;this.$5=c;return!0}return!1;case b("VideoPlayerCea608Command").START_ROLL_UP_2:this.$5.setRollupSize(2);this.$7=new q();return!1;case b("VideoPlayerCea608Command").START_ROLL_UP_3:this.$5.setRollupSize(3);this.$7=new q();return!1;case b("VideoPlayerCea608Command").START_ROLL_UP_4:this.$5.setRollupSize(4);this.$7=new q();return!1}c=this.$7.handleCommand(a,this.$5,this.$6);return c};c.$14=function(a){if(a instanceof o)return"center";else if(a instanceof p)return"center";else if(a instanceof q)return"left";else return"center"};c.$13=function(a,b){if(this.$8==null||this.$8.length!==a.length||this.$8.some(function(b,c){return b!==a[c]})){this.$9.changedCount++;var c=this.$1;c&&(c(),this.$1=null);c=this.$2;c&&c(a,b)}this.$8=a};return a}();e.exports=a}),null);