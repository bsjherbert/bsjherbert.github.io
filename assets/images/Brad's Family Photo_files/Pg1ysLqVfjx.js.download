if (self.CavalryLogger) { CavalryLogger.start_js(["lJmK7"]); }

__d("ShareDialogDataSources",["getObjectValues"],(function(a,b,c,d,e,f){__p&&__p();a={ACTION:"actionSource",EVENT:"event",FUNDRAISER:"fundraiserSource",GROUP:"groupSource",MENTIONS:"mentionsSource",MESSAGE:"messageSource",OBJECT:"objectSource",PAGE:"pageSource",PERSON:"personSource",PERSON_WALL:"personWallSource",PLACE:"placeSource",STORY:"storySource"};var g=b("getObjectValues")(a);c=function(){"use strict";__p&&__p();function a(){this.$1={},this.$1={}}var b=a.prototype;b.addSource=function(a,b){g.some(function(b){return a===b})&&(this.$1[a]=b);return this};b.getSource=function(a){return this.$1[a]};return a}();c.TYPES=a;e.exports=c}),null);
__d("ShareDialogAudience.react",["cx","Bootloader","MercuryConfig","React","ReactComposerContextTypes","ShareDialogAudienceTypes","ShareDialogDataSources","SubscriptionsHandler","emptyFunction"],(function(a,b,c,d,e,f,g){__p&&__p();var h=b("ShareDialogDataSources").TYPES,i,j,k,l,m,n,o;a=b("React").PropTypes;c=b("React").createClass({displayName:"ShareDialogAudience",_subscriptionsHandler:b("SubscriptionsHandler"),contextTypes:b("ReactComposerContextTypes"),propTypes:{activeAudience:function(a){if(!b("ShareDialogAudienceTypes").isValid(a.activeAudience))return new Error("The active audience is invalid.")},customModules:a.shape({groupsAudience:a.arrayOf(a.func)}),sentEntryID:a.string,errorEntryID:a.string,messageTargets:a.array,lockMessageTargets:a.bool,userId:a.string,dataSources:a.instanceOf(b("ShareDialogDataSources")),onClear:a.func,onChange:a.func,onPost:a.func,hideShareDialog:a.func,defaultEventTargetID:a.string,defaultPageTargetID:a.string,defaultPageActorID:a.string,defaultGroupTargetID:a.string,defaultFundraiserTargetID:a.string,preselectedID:a.string,preselectedTitle:a.string,enableGroupVoiceSwitcher:a.bool,showGroupVoiceSwitcherFirst:a.bool,hidePagePostingAs:a.bool,isOldForwardFlow:a.bool,setSectionName:a.func,maybeLogEvent:a.func},getDefaultProps:function(){return{customModules:{},dataSources:new(b("ShareDialogDataSources"))(),onClear:b("emptyFunction"),onChange:b("emptyFunction")}},getInitialState:function(){return{bootloaded:!1,bootloading:!1}},componentDidMount:function(){this._subscriptionsHandler=new(b("SubscriptionsHandler"))();if(!this.state.bootloading&&!this.state.bootloaded){this.setState({bootloading:!0});var a=b("Bootloader").loadModules(["ShareDialogMessageAudience.react","ShareDialogGroupAudience.react","ShareDialogGroupAudienceV2.react","ShareDialogEventAudience.react","ShareDialogPersonAudience.react","ShareDialogPageAudience.react","ShareDialogFundraiserAudience.react"],function(a,b,c,d,e,f,g){i=a,j=b,k=c,l=d,m=e,n=f,o=g,this.setState({bootloading:!1,bootloaded:!0})}.bind(this),"ShareDialogAudience.react");this._subscriptionsHandler.addSubscriptions(a)}},componentWillUnmount:function(){this._subscriptionsHandler&&this._subscriptionsHandler.release(),delete this._subscriptionsHandler},render:function(){__p&&__p();if(this.state.bootloaded){var a=this.props.dataSources;if(a.getSource(h.MESSAGE)&&this.props.activeAudience===b("ShareDialogAudienceTypes").MESSAGE)return b("React").createElement(i,{userId:this.props.userId,onClear:this.props.onClear,onChange:this.props.onChange,onPost:this.props.onPost,ref:this.props.ref,messageTargets:this.props.messageTargets,lockMessageTargets:this.props.lockMessageTargets,sentEntryID:this.props.sentEntryID,errorEntryID:this.props.errorEntryID,isOldForwardFlow:this.props.isOldForwardFlow,hideShareDialog:this.props.hideShareDialog,setSectionName:this.props.setSectionName,maybeLogEvent:this.props.maybeLogEvent});if(a.getSource(h.PERSON_WALL)&&this.props.activeAudience===b("ShareDialogAudienceTypes").PERSON)return b("React").createElement(m,{userId:this.props.userId,onClear:this.props.onClear,onChange:this.props.onChange,preselectedID:this.props.preselectedID,preselectedTitle:this.props.preselectedTitle,ref:this.props.ref,searchSource:a.getSource(h.PERSON_WALL),lockPersonTargets:this.props.lockPersonTargets});if(a.getSource(h.GROUP)&&this.props.activeAudience===b("ShareDialogAudienceTypes").GROUP){var c=this.props.customModules?this.props.customModules.groupsAudience:null;return this.props.showGroupVoiceSwitcherFirst?b("React").createElement(k,{defaultActorID:this.props.userId,onChange:this.props.onChange}):b("React").createElement(j,{customModules:c,onClear:this.props.onClear,onChange:this.props.onChange,ref:this.props.ref,searchSource:a.getSource(h.GROUP),pagesSource:a.getSource(h.PAGE),defaultGroupID:this.props.defaultGroupTargetID,userId:this.props.userId,enableGroupVoiceSwitcher:this.props.enableGroupVoiceSwitcher,showGroupVoiceSwitcherFirst:this.props.showGroupVoiceSwitcherFirst})}if(a.getSource(h.EVENT)&&this.props.activeAudience===b("ShareDialogAudienceTypes").EVENT)return b("React").createElement(l,{defaultEventID:this.props.defaultEventTargetID,onClear:this.props.onClear,onChange:this.props.onChange,ref:this.props.ref,searchSource:a.getSource(h.EVENT)});if(a.getSource(h.PAGE)&&this.props.activeAudience===b("ShareDialogAudienceTypes").PAGE)return b("React").createElement(n,{onClear:this.props.onClear,onChange:this.props.onChange,ref:this.props.ref,pagesSource:a.getSource(h.PAGE),defaultPageID:this.props.defaultPageTargetID,defaultActorID:this.props.defaultPageActorID,hidePostingAs:this.props.hidePagePostingAs});if(a.getSource(h.FUNDRAISER)&&this.props.activeAudience===b("ShareDialogAudienceTypes").FUNDRAISER)return b("React").createElement(o,{defaultFundraiserID:this.props.defaultFundraiserTargetID,onChange:this.props.onChange,ref:this.props.ref,source:a.getSource(h.FUNDRAISER)})}return this.props.activeAudience===b("ShareDialogAudienceTypes").MESSAGE&&b("MercuryConfig").MNNSS?b("React").createElement("div",{className:"_6waq"}):b("React").createElement("noscript",null)}});e.exports=c;e.exports.TYPES=b("ShareDialogAudienceTypes")}),null);
__d("ShareDialogAudienceText.react",["fbt","React","ShareDialogAudienceTypes","ShareDialogConfig","qex"],(function(a,b,c,d,e,f,g){__p&&__p();a=b("React").PropTypes;c=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.$1=function(){__p&&__p();switch(this.props.audience){case b("ShareDialogAudienceTypes").STORY:return g._("Share to Your Story");case b("ShareDialogAudienceTypes").OWN:return this.props.enableShareSheet?g._("Share to News Feed or Story"):g._("Share on Your Timeline");case b("ShareDialogAudienceTypes").PERSON:return g._("Share on a Friend's Timeline");case b("ShareDialogAudienceTypes").GROUP:return g._("Share in a Group");case b("ShareDialogAudienceTypes").EVENT:return g._("Share in an Event");case b("ShareDialogAudienceTypes").PAGE:return g._("Share on a Page You Manage");case b("ShareDialogAudienceTypes").FUNDRAISER:return g._("Share on Your Fundraiser");case b("ShareDialogAudienceTypes").MESSAGE:if(b("ShareDialogConfig").share_in_separate_messages)return g._("Share in Separate Messages");else return g._("Share in a Private Message");default:return b("React").createElement("noscript",null)}};d.render=function(){return b("React").createElement("span",this.props,this.$1())};return c}(b("React").Component);c.propTypes={audience:function(a){if(!b("ShareDialogAudienceTypes").isValid(a.audience))return new Error("The audience is invalid.")},enableShareSheet:a.bool};c.defaultProps={audience:b("ShareDialogAudienceTypes").OWN,enableShareSheet:!1};e.exports=c}),null);
__d("ShareDialogAudienceSelector.react",["cx","React","ShareDialogAudienceText.react","ShareDialogAudienceTypes","XUIMenuSeparator.react","XUISelector.react","emptyFunction"],(function(a,b,c,d,e,f,g){__p&&__p();a=b("React").PropTypes;var h=b("XUISelector.react").Option,i="react_share_dialog_audience_selector";c=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={activeAudience:c.props.activeAudience},c.onChange=function(a){c.setState({activeAudience:a.value}),c.props.onAudienceSelect(a.value)},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.UNSAFE_componentWillReceiveProps=function(a){this.setState({activeAudience:a.activeAudience})};d.render=function(){__p&&__p();var a=this.props.allowedAudiences,c=[];if(a.length==1)return b("React").createElement("div",{className:"_94t _1nb1"},b("React").createElement("div",{className:"_42ym _41kd"},b("React").createElement(b("ShareDialogAudienceText.react"),{audience:this.props.activeAudience,shareType:this.props.shareType})));a.includes(b("ShareDialogAudienceTypes").STORY)&&c.push(b("React").createElement(h,{className:"_42ym _7l_8",value:b("ShareDialogAudienceTypes").STORY,key:b("ShareDialogAudienceTypes").STORY},b("React").createElement(b("ShareDialogAudienceText.react"),{audience:b("ShareDialogAudienceTypes").STORY,enableShareSheet:this.props.enableShareSheet})));a.includes(b("ShareDialogAudienceTypes").OWN)&&c.push(b("React").createElement(h,{className:"_42ym _42yn",value:b("ShareDialogAudienceTypes").OWN,key:b("ShareDialogAudienceTypes").OWN},b("React").createElement(b("ShareDialogAudienceText.react"),{audience:b("ShareDialogAudienceTypes").OWN,"data-testid":"share_on_own",enableShareSheet:this.props.enableShareSheet})));a.includes(b("ShareDialogAudienceTypes").PERSON)&&c.push(b("React").createElement(h,{className:"_42ym _42yp",value:b("ShareDialogAudienceTypes").PERSON,key:b("ShareDialogAudienceTypes").PERSON},b("React").createElement(b("ShareDialogAudienceText.react"),{audience:b("ShareDialogAudienceTypes").PERSON,"data-testid":"share_to_person"})));a.includes(b("ShareDialogAudienceTypes").GROUP)&&c.push(b("React").createElement(h,{className:"_42ym _2n3i",value:b("ShareDialogAudienceTypes").GROUP,key:b("ShareDialogAudienceTypes").GROUP},b("React").createElement(b("ShareDialogAudienceText.react"),{audience:b("ShareDialogAudienceTypes").GROUP,"data-testid":"share_to_group"})));a.includes(b("ShareDialogAudienceTypes").EVENT)&&c.push(b("React").createElement(h,{className:"_42ym _18sr",value:b("ShareDialogAudienceTypes").EVENT,key:b("ShareDialogAudienceTypes").EVENT},b("React").createElement(b("ShareDialogAudienceText.react"),{audience:b("ShareDialogAudienceTypes").EVENT,"data-testid":"share_to_event"})));a.includes(b("ShareDialogAudienceTypes").PAGE)&&c.push(b("React").createElement(h,{className:"_42ym _42y_",value:b("ShareDialogAudienceTypes").PAGE,key:b("ShareDialogAudienceTypes").PAGE},b("React").createElement(b("ShareDialogAudienceText.react"),{audience:b("ShareDialogAudienceTypes").PAGE,"data-testid":"share_to_page"})));a.includes(b("ShareDialogAudienceTypes").FUNDRAISER)&&c.push(b("React").createElement(h,{className:"_42ym _1a7k",value:b("ShareDialogAudienceTypes").FUNDRAISER,key:b("ShareDialogAudienceTypes").FUNDRAISER},b("React").createElement(b("ShareDialogAudienceText.react"),{audience:b("ShareDialogAudienceTypes").FUNDRAISER,"data-testid":"share_to_fundraiser"})));a.includes(b("ShareDialogAudienceTypes").MESSAGE)&&(c.length>0&&c.push(b("React").createElement(b("XUIMenuSeparator.react"),{key:"separator"})),c.push(b("React").createElement(h,{className:"_42ym _42z0",value:b("ShareDialogAudienceTypes").MESSAGE,key:b("ShareDialogAudienceTypes").MESSAGE},b("React").createElement(b("ShareDialogAudienceText.react"),{audience:b("ShareDialogAudienceTypes").MESSAGE,shareType:this.props.shareType,"data-testid":"share_via_message"}))));a="_94t"+(this.state.activeAudience===b("ShareDialogAudienceTypes").OWN?" _47xt":"")+(this.state.activeAudience===b("ShareDialogAudienceTypes").PERSON?" _47xu":"")+(this.state.activeAudience===b("ShareDialogAudienceTypes").GROUP?" _47xv":"")+(this.state.activeAudience===b("ShareDialogAudienceTypes").EVENT?" _18ss":"")+(this.state.activeAudience===b("ShareDialogAudienceTypes").PAGE?" _47xw":"")+(this.state.activeAudience===b("ShareDialogAudienceTypes").FUNDRAISER?" _2afb":"")+(this.state.activeAudience===b("ShareDialogAudienceTypes").MESSAGE?" _47xx":"")+(this.state.activeAudience===b("ShareDialogAudienceTypes").STORY?" _7l_9":"");return b("React").createElement(b("XUISelector.react"),{maxwidth:400,className:a,defaultValue:this.state.activeAudience,name:"mode",onChange:this.onChange,"data-testid":i},c)};return c}(b("React").Component);c.propTypes={allowedAudiences:function(a){if(!a.allowedAudiences.every(function(a){return b("ShareDialogAudienceTypes").isValid(a)}))return new Error("The allowed audiences are not valid.")},activeAudience:function(a){if(!b("ShareDialogAudienceTypes").isValid(a.activeAudience)||!a.allowedAudiences.some(function(b){return b===a.activeAudience}))return new Error("The active audience is either invalid or not included in the allowed audience list.")},onAudienceSelect:a.func,enableShareSheet:a.bool};c.defaultProps={onAudienceSelect:b("emptyFunction"),activeAudience:b("ShareDialogAudienceTypes").OWN,allowedAudiences:b("ShareDialogAudienceTypes").ALL,enableShareSheet:!1};e.exports=c}),null);
__d("ExternalWebShareDialogAudienceHeader.react",["cx","fbt","Arbiter","CurrentUser","ExternalWebShareDialogObserver","React","ReactComposerContextConfig","ReactComposerContextProviderMixin","ShareDialogAudience.react","ShareDialogAudienceSelector.react","ShareDialogAudienceTypes","ShareDialogDataSources"],(function(a,b,c,d,e,f,g,h){__p&&__p();a=b("React").PropTypes;c=b("React").createClass({displayName:"ExternalWebShareDialogAudienceHeader",mixins:[b("ReactComposerContextProviderMixin")],propTypes:{contextConfig:b("ReactComposerContextConfig").isRequired,dataSources:a.shape({friend:a.object,page:a.object,group:a.object.isRequired,fundraiser:a.array}).isRequired,audience:a.oneOf(Object.keys(b("ShareDialogAudienceTypes")).map(function(a){return b("ShareDialogAudienceTypes")[a]})),disableMessage:a.bool,targetTitle:a.string,onChange:a.func,onAudienceSelect:a.func,defaultEventTargetID:a.string,defaultGroupTargetID:a.string,defaultFundraiserTargetID:a.string,defaultPageActorID:a.string,defaultPageTargetID:a.string,hidePagePostingAs:a.bool,enableShareSheet:a.bool},getDefaultProps:function(){return{audience:b("CurrentUser").isWorkUser()?b("ShareDialogAudienceTypes").GROUP:b("ShareDialogAudienceTypes").OWN,disableMessage:!1}},getInitialState:function(){var a=this.props.dataSources,c=this.props.contextConfig.actorID,d=this.props.contextConfig.targetID;a={audience:this.props.audience,audienceDataSources:new(b("ShareDialogDataSources"))().addSource(b("ShareDialogDataSources").TYPES.PERSON_WALL,a.friend).addSource(b("ShareDialogDataSources").TYPES.GROUP,a.group).addSource(b("ShareDialogDataSources").TYPES.EVENT,a.event).addSource(b("ShareDialogDataSources").TYPES.PAGE,a.page).addSource(b("ShareDialogDataSources").TYPES.FUNDRAISER,a.fundraiser).addSource(b("ShareDialogDataSources").TYPES.MESSAGE,a.friend||a.message),disableMessage:this.props.disableMessage};c&&this.props.audience===b("ShareDialogAudienceTypes").PAGE?(a.audienceTargets=[c],a.actorId=c):d&&(a.audienceTargets=[d],a.targetTitle=this.props.targetTitle);return a},getCurrentAudience:function(){var a=this.state.audienceTargets;a||(a=[this.props.contextConfig.actorID]);return{audience:this.state.audience,audienceTargets:a,actorId:this.state.actorId}},UNSAFE_componentWillMount:function(){var a=this;b("Arbiter").subscribe("isQuoteSet",function(b,c){a.setState({disableMessage:c})})},_onAudienceSelect:function(a){b("ExternalWebShareDialogObserver").setUserInfoVisibility({hide:a===b("ShareDialogAudienceTypes").PAGE}),this.setState({audience:a,audienceTargets:null,actorId:null,targetTitle:null}),this.props.onAudienceSelect&&this.props.onAudienceSelect(a)},_onChangeAudienceTargets:function(a){this.state.audience===b("ShareDialogAudienceTypes").PAGE?this.setState({audienceTargets:[a[0].pageId],actorId:a[0].actorId}):this.setState({audienceTargets:a,actorId:null});if(this.props.onChange){a||(a=[this.props.contextConfig.actorID]);a={audience:this.state.audience,audienceTargets:a,actorId:this.state.actorId};this.props.onChange(a)}},_onClearAudienceTargets:function(){this.setState({audienceTargets:null})},render:function(){__p&&__p();var a;b("ExternalWebShareDialogObserver").setHidePrivacy({hide:this.state.audience!==b("ShareDialogAudienceTypes").OWN});b("ExternalWebShareDialogObserver").setDisableFeedCheckBox({disable:this.state.audience!==b("ShareDialogAudienceTypes").OWN});b("ExternalWebShareDialogObserver").setDisableStoryCheckBox({disable:this.state.audience!==b("ShareDialogAudienceTypes").OWN});b("ExternalWebShareDialogObserver").setDisableDestinationRow({disable:this.state.audience!==b("ShareDialogAudienceTypes").OWN});if(this.state.audience===b("ShareDialogAudienceTypes").OWN)a=null;else{var c=null,d=null,e=null,f=null;this.state.audience===b("ShareDialogAudienceTypes").PAGE?this.props.defaultPageTargetID?c=this.props.defaultPageTargetID:this.state.audienceTargets&&(c=this.state.audienceTargets[0]):this.state.audience===b("ShareDialogAudienceTypes").EVENT?this.props.defaultEventTargetID?d=this.props.defaultEventTargetID:this.state.audienceTargets&&(d=this.state.audienceTargets[0]):this.state.audience===b("ShareDialogAudienceTypes").GROUP?this.props.defaultGroupTargetID?e=this.props.defaultGroupTargetID:this.state.audienceTargets&&(e=this.state.audienceTargets[0]):this.state.audienceTargets&&this.state.targetTitle&&(f=this.state.audienceTargets[0]);a=b("React").createElement("div",null,b("React").createElement(b("ShareDialogAudience.react"),{activeAudience:this.state.audience,dataSources:this.state.audienceDataSources,onChange:this._onChangeAudienceTargets,onClear:this._onClearAudienceTargets,defaultPageTargetID:c,defaultPageActorID:this.props.defaultPageActorID,defaultEventTargetID:d,defaultGroupTargetID:e,defaultFundraiserTargetID:this.props.defaultFundraiserTargetID,preselectedID:f,preselectedTitle:this.state.targetTitle,userId:this.props.contextConfig.actorID,hidePagePostingAs:this.props.hidePagePostingAs,isOldForwardFlow:!0}))}if(this.state.audience===b("ShareDialogAudienceTypes").MESSAGE)b("ExternalWebShareDialogObserver").setHideComposerTaggers({hide:!0}),b("ExternalWebShareDialogObserver").setSubmitButtonActionText({actionText:h._("Send Message")});else{b("ExternalWebShareDialogObserver").setHideComposerTaggers({hide:!1});c=b("CurrentUser").isWorkUser()?h._("Post to Workplace"):h._("Post to Facebook");b("ExternalWebShareDialogObserver").setSubmitButtonActionText({actionText:c})}b("ExternalWebShareDialogObserver").setDisableSubmitButton({disable:this.state.audience!==b("ShareDialogAudienceTypes").OWN&&(!Array.isArray(this.state.audienceTargets)||this.state.audienceTargets.length===0)});d=[b("ShareDialogAudienceTypes").OWN,b("ShareDialogAudienceTypes").GROUP];this.props.dataSources.friend&&d.push(b("ShareDialogAudienceTypes").PERSON);this.props.dataSources.page&&d.push(b("ShareDialogAudienceTypes").PAGE);this.props.dataSources.fundraiser&&d.push(b("ShareDialogAudienceTypes").FUNDRAISER);this.props.dataSources.event&&d.push(b("ShareDialogAudienceTypes").EVENT);this.state.disableMessage||d.push(b("ShareDialogAudienceTypes").MESSAGE);return b("React").createElement("div",{"data-testid":"share-dialog-audience"},b("React").createElement("div",{className:"_kz1"+(this.props.hidePagePostingAs?"":" _125y")},b("React").createElement(b("ShareDialogAudienceSelector.react"),{activeAudience:this.state.audience,onAudienceSelect:this._onAudienceSelect,allowedAudiences:d,enableShareSheet:this.props.enableShareSheet})),a,b("React").createElement("input",{type:"hidden",name:"audience_targets",value:this.state.audienceTargets}),b("React").createElement("input",{type:"hidden",name:"av",value:this.state.actorId}))}});e.exports=c}),null);